<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø§Ù„ÙÙ†Ø§Ø¯Ù‚ Ø§Ù„ØªÙŠ Ù†ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§ | Ø³ÙŠØ§ÙØ§ ØªØ±Ø§ÙÙ„</title>

  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#05060a;
      --panel:#111217;
      --gold:#d4af37;
    }
    body{
      margin:0;
      font-family:'Cairo',sans-serif;
      background:var(--bg);
      color:#fff;
      direction:rtl;
    }
    .header{
      padding:34px 18px;
      text-align:center;
      background:rgba(17,18,23,0.9);
      border-bottom:1px solid rgba(255,255,255,0.06);
    }
    .header h1{ margin:0 0 10px 0; font-size:30px; }
    .header p{ margin:0; opacity:0.85; line-height:1.8; }

    .container{
      max-width:1000px;
      margin:auto;
      padding:28px 18px 70px;
    }
    .search{
      display:flex;
      gap:12px;
      margin:18px 0 22px;
      flex-wrap:wrap;
    }
    .search input{
      flex:1;
      min-width:240px;
      padding:14px 14px;
      border-radius:12px;
      border:none;
      font-family:'Cairo',sans-serif;
    }
    .search select{
      padding:14px 12px;
      border-radius:12px;
      border:none;
      font-family:'Cairo',sans-serif;
      background:#fff;
      color:#111;
      min-width:150px;
    }

    /* Area map */
    .area-map{
      margin:0 0 16px;
      background:rgba(17,18,23,0.95);
      border:1px solid rgba(255,255,255,0.10);
      border-radius:16px;
      padding:16px;
    }
    .area-map h2{ margin:0 0 8px; font-size:24px; }
    .area-map p{ margin:0 0 12px; opacity:.92; font-size:16px; line-height:1.9; }
    .map-controls{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px; }
    .map-chip{
      display:flex; align-items:center; gap:8px;
      font-size:13px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      border-radius:999px;
      padding:8px 12px;
    }
    .map-chip input{ accent-color:#d4af37; }
    .map-wrap{
      position:relative;
      border-radius:14px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background:linear-gradient(180deg,#1f4a69 0%,#173d5a 50%,#12324a 100%);
    }
    #istanbulMap{ width:100%; height:auto; display:block; }
    .land-mass{ fill:#f2f4f6; stroke:#cad1d8; stroke-width:2; pointer-events:none; }
    .coast-line{ stroke:#5f7890; stroke-width:2; fill:none; opacity:.7; pointer-events:none; }
    .bosphorus-fill{ fill:#72c2e8; pointer-events:none; }
    .marmara-fill{ fill:#67b9de; pointer-events:none; }
    .golden-horn-fill{ fill:#79c7ea; pointer-events:none; }
    .metro-line{ stroke:#e9558f; stroke-width:5; fill:none; pointer-events:none; }
    .tram-line{ stroke:#2dcf96; stroke-width:5; fill:none; pointer-events:none; }
    .zone-bubble{ fill:rgba(212,175,55,.14); stroke:rgba(212,175,55,.45); stroke-width:2; pointer-events:none; }

    .poi-group{ cursor:pointer; }
    .poi-core{ fill:#ffcf5a; stroke:#0f1720; stroke-width:2; transition:.2s; }
    .poi-ring{ fill:none; stroke:rgba(255,208,99,.45); stroke-width:2; }
    .poi-label-bg{ fill:rgba(8,11,17,.82); stroke:rgba(255,255,255,.26); stroke-width:1; rx:8; pointer-events:none; }
    .poi-label{ fill:#fff; font-size:15px; font-family:'Cairo',sans-serif; pointer-events:none; font-weight:700; }
    .poi-group.is-active .poi-core{ fill:#fff2b7; transform:scale(1.1); transform-origin:center; }
    .poi-group.is-active .poi-ring{ stroke:rgba(255,208,99,.95); }
    .poi-hit{ fill:transparent; r:18; }

    .water-label{ fill:rgba(255,255,255,.92); font-size:24px; font-family:'Cairo',sans-serif; font-weight:700; }
    .water-sub{ fill:rgba(255,255,255,.85); font-size:16px; font-family:'Cairo',sans-serif; }

    .map-legend{ display:flex; gap:12px; flex-wrap:wrap; font-size:12px; opacity:.92; margin-top:12px; }
    .legend-item{ display:flex; align-items:center; gap:6px; }
    .legend-line{ width:22px; height:4px; border-radius:4px; }
    .metro-swatch{ background:#e9558f; }
    .tram-swatch{ background:#2dcf96; }
    .legend-dot{ width:10px; height:10px; border-radius:50%; background:#ffcf5a; display:inline-block; }

    .info-badge{
      position:absolute;
      left:12px;
      bottom:12px;
      max-width:420px;
      background:rgba(8,11,17,.92);
      border:1px solid rgba(255,255,255,.20);
      border-radius:12px;
      padding:12px 14px;
      font-size:14px;
      line-height:1.9;
    }
    .info-badge b{ color:#ffe08f; }

    @media (max-width:900px){
      .poi-label{ font-size:13px; }
    }
    @media (max-width:768px){
      .area-map{ padding:14px; }
      .area-map p{ font-size:15px; }
      .map-chip{ font-size:12px; }
      .info-badge{ position:static; margin-top:10px; max-width:100%; font-size:13px; }
      .poi-label{ font-size:12px; }
    }

    .btn{
      background:var(--gold);
      color:#000;
      padding:14px 18px;
      border-radius:999px;
      font-weight:bold;
      text-decoration:none;
      border:none;
      cursor:pointer;
    }

    .top-actions{
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    .secondary{
      background:transparent;
      color:#fff;
      border:1px solid rgba(255,255,255,0.22);
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:14px;
    }
    .hotel{
      background:rgba(17,18,23,0.92);
      border:1px solid rgba(255,255,255,0.06);
      border-radius:14px;
      padding:12px;
      line-height:1.8;
      overflow:hidden;
    }
    .hotel-thumb{
      width:100%;
      height:150px;
      object-fit:cover;
      border-radius:10px;
      display:block;
      cursor:zoom-in;
      border:1px solid rgba(255,255,255,0.12);
      background:#0b0c10;
    }
    .hotel-meta{ padding:8px 4px 4px; }
    .hotel-headline{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .hotel b{ display:block; font-size:16px; margin-bottom:2px; line-height:1.5; }
    .hotel-ar{ font-size:14px; color:rgba(255,255,255,0.92); }

    .hotel-rating{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      line-height:1.2;
      flex:0 0 auto;
    }
    .rating-label{ font-size:11px; opacity:0.78; }
    .rating-stars{
      color:#f5c84b;
      letter-spacing:1px;
      font-size:14px;
      text-shadow:0 1px 6px rgba(212,175,55,.35);
    }

    .muted{ opacity:0.8; font-size:13px; }

    .gallery-btn{
      margin-top:8px;
      width:100%;
      background:transparent;
      color:#fff;
      border:1px solid rgba(255,255,255,0.25);
      border-radius:10px;
      padding:10px;
      cursor:pointer;
    }

    .footer-note{
      margin-top:22px;
      background:rgba(17,18,23,0.92);
      border:1px solid rgba(255,255,255,0.06);
      border-radius:14px;
      padding:16px;
      line-height:1.9;
    }
    .footer-note a{ color:#fff; }

    .lightbox{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(5,6,10,0.9);
      z-index:1200;
      padding:14px;
    }
    .lightbox.open{ display:flex; }
    .lightbox-box{
      width:min(1000px, 100%);
      max-height:92vh;
      background:rgba(14,15,20,0.95);
      border:1px solid rgba(255,255,255,0.16);
      border-radius:16px;
      padding:10px;
    }
    .lightbox-head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:4px 4px 10px;
    }
    .lightbox-title{font-size:14px; opacity:0.88;}
    .lightbox-close,
    .lightbox-nav{
      width:40px;
      height:40px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.06);
      color:#fff;
      cursor:pointer;
      font-size:22px;
    }
    .lightbox-main{
      position:relative;
      border-radius:14px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.12);
      min-height:220px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .lightbox-image{
      width:100%;
      max-height:66vh;
      object-fit:contain;
      display:block;
      background:#0b0c10;
    }
    .lightbox-prev,
    .lightbox-next{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
    }
    .lightbox-prev{ left:8px; }
    .lightbox-next{ right:8px; }
    .lightbox-strip{
      margin-top:10px;
      display:flex;
      gap:8px;
      overflow-x:auto;
    }
    .lightbox-thumb{
      width:62px;
      height:62px;
      object-fit:cover;
      border-radius:8px;
      border:2px solid transparent;
      opacity:.8;
      cursor:pointer;
      flex:0 0 auto;
    }
    .lightbox-thumb.active{
      border-color:var(--gold);
      opacity:1;
    }
    .lightbox-loading{
      opacity:.85;
      font-size:14px;
      text-align:center;
      padding:24px 10px;
      line-height:1.9;
    }
  </style>
</head>

<body>

  <div class="header">
    <h1>Ø§Ù„ÙÙ†Ø§Ø¯Ù‚ Ø§Ù„ØªÙŠ Ù†ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§</h1>
    <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ ØµÙˆØ±Ø© Ù„ÙÙ†Ø¯Ù‚ Ù„Ø¹Ø±Ø¶Ù‡Ø§ Ø¨Ø´ÙƒÙ„ Ù…ÙƒØ¨Ø± ÙˆØ§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙˆØ± âœ…</p>
    <div class="top-actions">
      <a class="btn secondary" href="index.html">â¬… Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</a>
      <a class="btn" href="https://wa.me/905317387785">ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</a>
    </div>
  </div>

  <div class="container">

    <div class="search">
      <input id="q" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙ†Ø¯Ù‚â€¦ Ù…Ø«Ø§Ù„: Marriott" oninput="filterHotels()" />
      <select id="ratingFilter" onchange="filterHotels()" aria-label="ÙÙ„ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ">
        <option value="5">5 Ù†Ø¬ÙˆÙ…</option>
        <option value="34">3-4 Ù†Ø¬ÙˆÙ…</option>
        <option value="all" selected>ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>
      </select>
      <select id="areaFilter" onchange="filterHotels()" aria-label="ÙÙ„ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
        <option value="all" selected>ÙƒÙ„ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</option>
      </select>
      <button class="btn" type="button" onclick="document.getElementById('q').value=''; document.getElementById('ratingFilter').value='all'; document.getElementById('areaFilter').value='all'; filterHotels();">Ù…Ø³Ø­</button>
    </div>

    <section class="area-map" aria-label="Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ø¨Ø³Ø·Ø© Ù„Ø³Ù†ØªØ± Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„">
      <h2>ğŸ—ºï¸ Ø®Ø±ÙŠØ·Ø© Ø³Ù†ØªØ± Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„ â€” ÙˆØ§Ø¶Ø­Ø© ÙˆØ¨Ø³ÙŠØ·Ø©</h2>
      <p>Ù…Ù†Ø§Ø·Ù‚ Ø±Ø¦ÙŠØ³ÙŠØ© + Ù…Ø¹Ù„Ù… Ø³ÙŠØ§Ø­ÙŠ Ø¨Ø´ÙƒÙ„ Ù…Ø®ØªØµØ±ØŒ Ù…Ø¹ Ø®Ø·ÙˆØ· Ù…ØªØ±Ùˆ ÙˆØªØ±Ø§Ù… ÙˆØ§Ø¶Ø­Ø©. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù†Ù‚Ø·Ø© ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø©.</p>

      <div class="map-controls">
        <label class="map-chip"><input type="checkbox" id="toggleMetro" checked> Ø®Ø·ÙˆØ· Ø§Ù„Ù…ØªØ±Ùˆ</label>
        <label class="map-chip"><input type="checkbox" id="toggleTram" checked> Ø®Ø· ØªØ±Ø§Ù…ÙˆØ§ÙŠ T1</label>
      </div>

      <div class="map-wrap">
        <svg id="istanbulMap" viewBox="0 0 1200 620" role="img" aria-label="Ø®Ø±ÙŠØ·Ø© Ø³Ù†ØªØ± Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„ Ù…Ø¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ù…">
          <rect x="0" y="0" width="1200" height="620" fill="rgba(118,196,232,.36)"/>

          <path class="land-mass" d="M0 60 C180 70, 300 130, 390 230 C450 295, 520 330, 612 372 C666 398, 695 462, 680 620 L0 620 Z"/>
          <path class="land-mass" d="M548 0 C650 70, 732 130, 805 220 C874 306, 958 360, 1088 410 C1155 438, 1190 495, 1200 620 L1200 0 Z"/>

          <path class="bosphorus-fill" d="M585 0 C542 75, 530 143, 542 212 C558 288, 602 344, 640 395 C675 443, 683 515, 670 620 L602 620 C617 510, 609 446, 574 398 C534 343, 487 286, 472 214 C459 141, 478 73, 521 0 Z"/>
          <path class="golden-horn-fill" d="M372 257 C430 224, 489 215, 548 228 C533 259, 510 286, 483 309 C448 337, 417 361, 397 391 C360 357, 348 306, 372 257 Z"/>
          <path class="marmara-fill" d="M0 530 L660 620 L0 620 Z"/>

          <path class="coast-line" d="M0 60 C180 70, 300 130, 390 230 C450 295, 520 330, 612 372 C666 398, 695 462, 680 620"/>
          <path class="coast-line" d="M548 0 C650 70, 732 130, 805 220 C874 306, 958 360, 1088 410 C1155 438, 1190 495, 1200 620"/>

          <path class="metro-line" data-layer="metro" d="M140 230 L280 244 L418 258 L574 274 L744 292 L914 307"/>
          <path class="metro-line" data-layer="metro" d="M640 160 L720 210 L805 248"/>
          <path class="tram-line" data-layer="tram" d="M145 275 L244 283 L337 292 L430 301 L518 309 L586 316"/>

          <circle class="zone-bubble" cx="290" cy="312" r="150"/>
          <circle class="zone-bubble" cx="590" cy="275" r="135"/>
          <circle class="zone-bubble" cx="840" cy="275" r="150"/>

          <!-- Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
          <g class="poi-group" tabindex="0" role="button" aria-label="Ø¬Ø§Ù…Ø¹ Ø§Ù„ÙØ§ØªØ­" data-name="Ø¬Ø§Ù…Ø¹ Ø§Ù„ÙØ§ØªØ­" data-info="Ø¶Ù…Ù† Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙØ§ØªØ­ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©." data-transit="M2 + ØªØ±Ø§Ù… T1" transform="translate(176,304)">
            <circle class="poi-hit" r="22"/><circle class="poi-ring" r="16"/><circle class="poi-core" r="8"/>
            <rect class="poi-label-bg" x="18" y="-20" width="152" height="26"/><text class="poi-label" x="94" y="-3" text-anchor="middle">Ø§Ù„ÙØ§ØªØ­ â€” Ø¬Ø§Ù…Ø¹ Ø§Ù„ÙØ§ØªØ­</text>
          </g>

          <g class="poi-group" tabindex="0" role="button" aria-label="Ø¬Ø§Ù…Ø¹ Ø¢ÙŠØ§ ØµÙˆÙÙŠØ§" data-name="Ø¬Ø§Ù…Ø¹ Ø¢ÙŠØ§ ØµÙˆÙÙŠØ§" data-info="Ø¶Ù…Ù† Ù‚Ù„Ø¨ Ù…Ù†Ø·Ù‚Ø© Ø³Ù„Ø·Ø§Ù† Ø£Ø­Ù…Ø¯." data-transit="ØªØ±Ø§Ù… T1" transform="translate(292,320)">
            <circle class="poi-hit" r="22"/><circle class="poi-ring" r="16"/><circle class="poi-core" r="8"/>
            <rect class="poi-label-bg" x="18" y="-20" width="170" height="26"/><text class="poi-label" x="103" y="-3" text-anchor="middle">Ø³Ù„Ø·Ø§Ù† Ø£Ø­Ù…Ø¯ â€” Ø¢ÙŠØ§ ØµÙˆÙÙŠØ§</text>
          </g>

          <g class="poi-group" tabindex="0" role="button" aria-label="Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©" data-name="Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©" data-info="Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø£Ù…ÙŠÙ†ÙˆÙ†Ùˆ ÙˆØ§Ù„Ù‚Ø±Ù† Ø§Ù„Ø°Ù‡Ø¨ÙŠ." data-transit="T1 + Ù…Ø´ÙŠ Ù‚ØµÙŠØ±" transform="translate(420,352)">
            <circle class="poi-hit" r="22"/><circle class="poi-ring" r="16"/><circle class="poi-core" r="8"/>
            <rect class="poi-label-bg" x="18" y="-20" width="184" height="26"/><text class="poi-label" x="110" y="-3" text-anchor="middle">Ø£Ù…ÙŠÙ†ÙˆÙ†Ùˆ â€” Ø¬Ø§Ù…Ø¹ Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©</text>
          </g>

          <g class="poi-group" tabindex="0" role="button" aria-label="ÙƒØ§Ø±Ø§ÙƒÙˆÙŠ" data-name="ÙƒØ§Ø±Ø§ÙƒÙˆÙŠ" data-info="Ù…Ù†Ø·Ù‚Ø© Ø¹Ø¨ÙˆØ± Ø¨Ø­Ø±ÙŠØ© ÙˆÙ‚Ø±Ø¨ Ø¨Ø±Ø¬ ØºÙ„Ø§Ø·Ø©." data-transit="M2 + T1" transform="translate(610,275)">
            <circle class="poi-hit" r="22"/><circle class="poi-ring" r="16"/><circle class="poi-core" r="8"/>
            <rect class="poi-label-bg" x="18" y="-20" width="154" height="26"/><text class="poi-label" x="95" y="-3" text-anchor="middle">ÙƒØ±Ø§ÙƒÙˆÙŠ â€” Ø¨Ø±Ø¬ ØºÙ„Ø§Ø·Ø©</text>
          </g>

          <g class="poi-group" tabindex="0" role="button" aria-label="ØªÙ‚Ø³ÙŠÙ… ÙˆØ´Ø§Ø±Ø¹ Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„" data-name="ØªÙ‚Ø³ÙŠÙ… ÙˆØ´Ø§Ø±Ø¹ Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„" data-info="Ù‚Ù„Ø¨ Ø¨ÙŠÙˆØºÙ„Ùˆ Ø§Ù„Ø¹ØµØ±ÙŠ ÙˆØ§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ©." data-transit="M2 + F1" transform="translate(785,300)">
            <circle class="poi-hit" r="22"/><circle class="poi-ring" r="16"/><circle class="poi-core" r="8"/>
            <rect class="poi-label-bg" x="18" y="-20" width="182" height="26"/><text class="poi-label" x="109" y="-3" text-anchor="middle">ØªÙ‚Ø³ÙŠÙ… â€” Ø´Ø§Ø±Ø¹ Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„</text>
          </g>

          <g class="poi-group" tabindex="0" role="button" aria-label="Ù…ÙˆÙ„ Ø¬ÙˆØ§Ù‡Ø± Ø´ÙŠØ´Ù„ÙŠ" data-name="Ù…ÙˆÙ„ Ø¬ÙˆØ§Ù‡Ø± Ø´ÙŠØ´Ù„ÙŠ" data-info="Ø£Ø­Ø¯ Ø£Ø´Ù‡Ø± Ø§Ù„Ù…ÙˆÙ„Ø§Øª ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø´ÙŠØ´Ù„ÙŠ." data-transit="M2 + Ù…ØªØ±ÙˆØ¨Ø§Øµ" transform="translate(890,261)">
            <circle class="poi-hit" r="22"/><circle class="poi-ring" r="16"/><circle class="poi-core" r="8"/>
            <rect class="poi-label-bg" x="18" y="-20" width="166" height="26"/><text class="poi-label" x="101" y="-3" text-anchor="middle">Ø´ÙŠØ´Ù„ÙŠ â€” Ù…ÙˆÙ„ Ø¬ÙˆØ§Ù‡Ø±</text>
          </g>

          <text class="water-label" x="546" y="352" transform="rotate(-73 546,352)">Ø§Ù„Ø¨ÙˆØ³ÙÙˆØ±</text>
          <text class="water-sub" x="80" y="572">Ø¨Ø­Ø± Ù…Ø±Ù…Ø±Ø©</text>
          <text class="water-sub" x="408" y="262">Ø§Ù„Ù‚Ø±Ù† Ø§Ù„Ø°Ù‡Ø¨ÙŠ</text>
        </svg>

        <div class="info-badge" id="mapInfo"><b>Ù…Ø¹Ù„ÙˆÙ…Ø© Ø³Ø±ÙŠØ¹Ø©:</b> Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ù†Ù‚Ø·Ø© Ù…Ù† Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„Ø¹Ø±Ø¶ Ø´Ø±Ø­ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ÙˆØ§Ù„Ù…Ø¹Ù„Ù…. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø£Ùˆ Ø§Ù„Ù†Ù‚Ø·Ø© Ù†ÙØ³Ù‡Ø§.</div>
      </div>

      <div class="map-legend">
        <span class="legend-item"><span class="legend-line metro-swatch"></span>Ù…ØªØ±Ùˆ</span>
        <span class="legend-item"><span class="legend-line tram-swatch"></span>ØªØ±Ø§Ù…ÙˆØ§ÙŠ T1</span>
        <span class="legend-item"><span class="legend-dot"></span>Ù…Ù†Ø·Ù‚Ø© + Ù…Ø¹Ù„Ù… Ù…Ø®ØªØµØ±</span>
      </div>
    </section>

    <div class="footer-note" style="margin:0 0 14px 0;">
      Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙˆØ¥Ø¶Ø§ÙØ© ÙÙ†Ø§Ø¯Ù‚ Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ. Ø¥Ø°Ø§ Ù„Ù… ØªØ¬Ø¯ Ø§Ù„ÙÙ†Ø¯Ù‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø­Ø§Ù„ÙŠØ§Ù‹ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ÙˆØ³Ù†ÙˆÙÙ‘Ø± Ù„Ùƒ Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø© âœ…
    </div>

    <div class="grid" id="hotelList">
      <!-- âœ… Ù…Ù‡Ù…: data-folder Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø¯Ø§Ø®Ù„ assets/hotels -->
      <div class="hotel" data-hotel="Marriott Hotel ÅiÅŸli" data-folder="marriott-hotel-sisli" data-hotel-ar="Ù…Ø§Ø±ÙŠÙˆØª Ø´ÙŠØ´Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø´ÙŠØ´Ù„ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Hilton Istanbul Bomonti" data-folder="hilton-istanbul-bomonti" data-hotel-ar="Ù‡ÙŠÙ„ØªÙˆÙ† Ø¨ÙˆÙ…ÙˆÙ†ØªÙŠ Ø´ÙŠØ´Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø´ÙŠØ´Ù„ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Sheraton Istanbul Levent" data-folder="sheraton-istanbul-levent" data-hotel-ar="Ø´ÙŠØ±Ø§ØªÙˆÙ† Ù„ÙŠÙÙŠÙ†Øª" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„ÙŠÙÙŠÙ†Øª" data-stars="5"></div>
      <div class="hotel" data-hotel="Ramada Plaza By Wyndham Sultanahmet" data-folder="ramada-plaza-by-wyndham-sultanahmet" data-hotel-ar="Ø±Ù…Ø§Ø¯Ø§ Ø³Ù„Ø·Ø§Ù† Ø§Ø­Ù…Ø¯ Ù„Ø§Ù„Ø§Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„Ø§Ù„Ø§Ù„ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Divan Istanbul Taksim" data-folder="divan-istanbul-taksim" data-hotel-ar="Ø¯ÙŠÙØ§Ù† ØªÙ‚Ø³ÙŠÙ…" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙ‚Ø³ÙŠÙ…" data-stars="5"></div>
      <div class="hotel" data-hotel="Point Hotel Taksim" data-folder="point-hotel-taksim" data-hotel-ar="Ø¨ÙˆÙŠÙ†Øª ØªÙ‚Ø³ÙŠÙ…" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙ‚Ø³ÙŠÙ…" data-stars="5"></div>
      <div class="hotel" data-hotel="Crowne Plaza Old City" data-folder="crowne-plaza-old-city" data-hotel-ar="ÙƒØ±Ø§ÙˆÙ† Ø¨Ù„Ø§Ø²Ø§ Ø§ÙˆÙ„Ø¯ Ø³ÙŠØªÙŠ Ù„Ø§Ù„Ø§Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„Ø§Ù„Ø§Ù„ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Mercure Istanbul Bomonti" data-folder="mercure-istanbul-bomonti" data-hotel-ar="Ù…ÙŠØ±ÙƒÙˆØ± Ø¨ÙˆÙ…ÙˆÙ†ØªÙŠ Ø´ÙŠØ´Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø´ÙŠØ´Ù„ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Holiday Inn ÅiÅŸli" data-folder="holiday-inn-sisli" data-hotel-ar="Ù‡ÙˆÙ„ÙŠØ¯ÙŠ Ø§Ù† Ø´ÙŠØ´Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø´ÙŠØ´Ù„ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Arts Hotel Harbiye" data-folder="arts-hotel-harbiye" data-hotel-ar="Ø§Ø±ØªØ³ Ø­Ø±Ø¨ÙŠØ© ØªÙ‚Ø³ÙŠÙ…" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙ‚Ø³ÙŠÙ…" data-stars="5"></div>
      <div class="hotel" data-hotel="Lions Royal Hotel" data-folder="lions-royal-hotel" data-hotel-ar="Ù„ÙŠÙˆÙ†Ø² Ø±ÙˆÙŠØ§Ù„" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„Ø§Ù„Ø§Ù„ÙŠ" data-stars="4" data-note="Ø§ÙØªØªØ§Ø­ Ø­Ø¯ÙŠØ«"></div>

      <div class="hotel" data-hotel="Mosaic Hotel Laleli" data-folder="mosaic-hotel-laleli" data-hotel-ar="Ù…ÙˆØ²Ø§ÙŠÙŠÙƒ Ù„Ø§Ù„Ø§Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„Ø§Ù„Ø§Ù„ÙŠ" data-stars="4"></div>
      <div class="hotel" data-hotel="Beethoven Premium Hotel Laleli" data-folder="beethoven-premium-hotel-laleli" data-hotel-ar="Ø¨ÙŠØªÙ‡ÙˆÙÙ† Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… Ù„Ø§Ù„Ø§Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„Ø§Ù„Ø§Ù„ÙŠ" data-stars="4"></div>
      <div class="hotel" data-hotel="The Parma Downtown Laleli" data-folder="the-parma-downtown-laleli" data-hotel-ar="Ø°Ø§ Ø¨Ø±Ø§Ù…Ø§ Ø¯Ø§ÙˆÙ† ØªØ§ÙˆÙ† Ù„Ø§Ù„Ø§Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„Ø§Ù„Ø§Ù„ÙŠ" data-stars="4"></div>
      <div class="hotel" data-hotel="Martinenz Hotel Laleli" data-folder="martinenz-hotel-laleli" data-hotel-ar="Ù…Ø§Ø±ØªÙŠÙ†ÙŠÙ†Ø² Ù„Ø§Ù„Ø§Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ù„Ø§Ù„Ø§Ù„ÙŠ" data-stars="4"></div>
      <div class="hotel" data-hotel="Four Sides ÅiÅŸli" data-folder="four-sides-sisli" data-hotel-ar="ÙÙˆØ±Ø³Ø§ÙŠØ¯Ø³ Ø´ÙŠØ´Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø´ÙŠØ´Ù„ÙŠ" data-stars="4"></div>
      <div class="hotel" data-hotel="Mare Park Hotel ÅiÅŸli" data-folder="mare-park-hotel-sisli" data-hotel-ar="Ù…Ø§Ø±ÙŠ Ø¨Ø§Ø±Ùƒ Ø´ÙŠØ´Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø´ÙŠØ´Ù„ÙŠ" data-stars="4"></div>
      <div class="hotel" data-hotel="AkgÃ¼n Istanbul Hotel TopkapÄ±" data-folder="akgun-istanbul-hotel-topkapi" data-hotel-ar="Ø§ÙƒØºÙˆÙ† ØªÙˆØ¨ ÙƒØ§Ø¨ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙˆØ¨ ÙƒØ§Ø¨ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Valide Hotel ÅiÅŸli" data-folder="valide-hotel-sisli" data-hotel-ar="ÙØ§Ù„ÙŠØ¯Ø§ Ø´ÙŠØ´Ù„ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø´ÙŠØ´Ù„ÙŠ" data-stars="3"></div>
      <div class="hotel" data-hotel="Eresin Hotels TopkapÄ±" data-folder="eresin-hotels-topkapi" data-hotel-ar="Ø§Ø±Ø³ÙŠÙ† ÙØ§ØªØ­ - ØªÙˆØ¨ ÙƒØ§Ø¨ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ÙØ§ØªØ­ - ØªÙˆØ¨ ÙƒØ§Ø¨ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="Holiday Inn Istanbul City TopkapÄ±" data-folder="holiday-inn-istanbul-city-topkapi" data-hotel-ar="Ù‡ÙˆÙ„ÙŠØ¯ÙŠ Ø§Ù† ÙØ§ØªØ­ - ØªÙˆØ¨ ÙƒØ§Ø¨ÙŠ" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ÙØ§ØªØ­ - ØªÙˆØ¨ ÙƒØ§Ø¨ÙŠ" data-stars="5"></div>
      <div class="hotel" data-hotel="The Marmara Pera" data-folder="the-marmara-pera" data-hotel-ar="Ø°Ø§ Ù…Ø±Ù…Ø±Ø© Ø¨ÙŠØ±Ø§ ØªÙ‚Ø³ÙŠÙ…" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙ‚Ø³ÙŠÙ…" data-stars="5"></div>
      <div class="hotel" data-hotel="Arts Hotel Taksim" data-folder="arts-hotel-taksim" data-hotel-ar="Ø§Ø±ØªØ³ ØªÙ‚Ø³ÙŠÙ…" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙ‚Ø³ÙŠÙ…" data-stars="4"></div>
      <div class="hotel" data-hotel="BarcelÃ³ Istanbul" data-folder="barcelo-istanbul" data-hotel-ar="Ø¨Ø§Ø±Ø³ÙŠÙ„Ùˆ ØªÙ‚Ø³ÙŠÙ…" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙ‚Ø³ÙŠÙ…" data-stars="5"></div>
      <div class="hotel" data-hotel="Nevi Hotel & Suites Taksim" data-folder="nevi-hotel-suites-taksim" data-hotel-ar="ÙˆØ§Ø¬Ù†Ø­Ø© Ù†ÙŠÙÙŠ ØªÙ‚Ø³ÙŠÙ…" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="ØªÙ‚Ø³ÙŠÙ…" data-stars="4"></div>
      <div class="hotel" data-hotel="Renaissance Istanbul Polat Bosphorus Hotel" data-folder="renaissance-istanbul-polat-bosphorus-hotel" data-hotel-ar="Ø±ÙŠÙ†ÙŠØ³Ø§Ù†Ø³ Ø¨ÙˆÙ„Ø§Øª Ø¨ÙˆØ³ÙÙˆØ±Ø³" data-city="Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„" data-area="Ø¨ÙŠØ´ÙƒØªØ§Ø´" data-stars="5"></div>
    </div>

    <div class="footer-note">
      ÙŠÙˆØ¬Ø¯ Ø®ÙŠØ§Ø±Ø§Øª Ø£Ø®Ø±Ù‰ Ø£ÙŠØ¶Ø§Ù‹ Ø­Ø³Ø¨ Ø§Ù„ØªÙˆÙØ± ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨.<br>
      Ù„Ù„ØªØ£ÙƒØ¯ Ø£Ùˆ Ø·Ù„Ø¨ ÙÙ†Ø¯Ù‚ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨:
      <a href="https://wa.me/905317387785">905317387785</a>
    </div>

  </div>

  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightbox-box">
      <div class="lightbox-head">
        <div class="lightbox-title" id="lightboxTitle"></div>
        <button class="lightbox-close" id="lightboxClose" aria-label="Ø¥ØºÙ„Ø§Ù‚">âœ•</button>
      </div>
      <div class="lightbox-main">
        <button class="lightbox-nav lightbox-prev" id="lightboxPrev" aria-label="Ø§Ù„Ø³Ø§Ø¨Ù‚">â€¹</button>
        <div class="lightbox-loading" id="lightboxLoading" style="display:none;">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±â€¦</div>
        <img id="lightboxImage" class="lightbox-image" alt="" style="display:none;">
        <button class="lightbox-nav lightbox-next" id="lightboxNext" aria-label="Ø§Ù„ØªØ§Ù„ÙŠ">â€º</button>
      </div>
      <div class="lightbox-strip" id="lightboxStrip"></div>
    </div>
  </div>

  <script>
    // ========= Manifest loader (FAST) =========
    async function loadManifest(folder){
      // cache-bust Ø¨Ø³ÙŠØ· Ø­ØªÙ‰ GitHub Pages ÙŠØ¬ÙŠØ¨ Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø¨Ø³Ø±Ø¹Ø©
      const url = `assets/hotels/${folder}/manifest.json?v=${Date.now()}`;
      const res = await fetch(url, { cache: "no-store" });
      if(!res.ok) throw new Error("manifest not found");
      return res.json();
    }

    function buildLocalUrl(folder, filename){
      return `assets/hotels/${folder}/${filename}`;
    }

    function getFolderFromCard(card){
      return (card.dataset.folder || "").trim();
    }

    // ========= Map interactions (as-is) =========
    function initMapInteractions(){
      const metroToggle = document.getElementById('toggleMetro');
      const tramToggle = document.getElementById('toggleTram');
      const mapInfo = document.getElementById('mapInfo');
      const metroLines = document.querySelectorAll('[data-layer="metro"]');
      const tramLines = document.querySelectorAll('[data-layer="tram"]');
      const poiGroups = document.querySelectorAll('.poi-group');

      const setLayerState = (elements, visible) => {
        elements.forEach((el) => { el.style.display = visible ? '' : 'none'; });
      };

      const activatePoi = (poi) => {
        if(!poi || !mapInfo) return;
        poiGroups.forEach((node) => node.classList.remove('is-active'));
        poi.classList.add('is-active');

        const name = poi.dataset.name || '';
        const info = poi.dataset.info || '';
        const transit = poi.dataset.transit || 'â€”';
        mapInfo.innerHTML = `<b>${name}</b><br>${info}<br><span style="opacity:.9">Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø£Ù‚Ø±Ø¨: ${transit}</span>`;
      };

      metroToggle?.addEventListener('change', () => setLayerState(metroLines, metroToggle.checked));
      tramToggle?.addEventListener('change', () => setLayerState(tramLines, tramToggle.checked));

      poiGroups.forEach((poi) => {
        poi.addEventListener('click', (e) => { e.stopPropagation(); activatePoi(poi); });
        poi.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' '){
            e.preventDefault();
            activatePoi(poi);
          }
        });
      });

      if(poiGroups.length) activatePoi(poiGroups[0]);
    }

    function initAreaFilter(){
      const areas = [...new Set(
        Array.from(document.querySelectorAll('#hotelList .hotel'))
          .map((h)=> (h.dataset.area || '').trim())
          .filter(Boolean)
      )];
      const areaFilter = document.getElementById('areaFilter');
      areas.sort((a,b)=>a.localeCompare(b,'ar'));
      areas.forEach((area)=>{
        const opt = document.createElement('option');
        opt.value = area;
        opt.textContent = area;
        areaFilter.appendChild(opt);
      });
    }

    // ========= Render hotel cards (cover from manifest) =========
    async function renderHotels(){
      const hotels = document.querySelectorAll('#hotelList .hotel');

      for(const card of hotels){
        const hotel = card.dataset.hotel || '';
        const hotelAr = card.dataset.hotelAr || hotel;
        const city = card.dataset.city || '';
        const area = card.dataset.area || city;
        const stars = Math.max(1, Math.min(parseInt(card.dataset.stars || "5", 10), 5));
        const starsText = "â˜…".repeat(stars);
        const note = card.dataset.note ? ` (${card.dataset.note})` : "";
        const folder = getFolderFromCard(card);
        const fallbackCover = "background123.jpg";

        let coverUrl = fallbackCover;

        // Ø­Ø§ÙˆÙ„ Ù†Ù‚Ø±Ø£ manifest Ù„Ù†Ø¬ÙŠØ¨ cover Ø¨Ø³Ø±Ø¹Ø©
        try{
          const m = await loadManifest(folder);
          const coverName = (m.cover || "cover.jpg").trim();
          coverUrl = buildLocalUrl(folder, coverName);
        }catch(e){
          // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠ manifest Ù„Ù‡Ø§Ù„ÙÙ†Ø¯Ù‚â€¦ Ø®Ù„Ù‘ÙŠÙ‡Ø§ fallback
          coverUrl = fallbackCover;
        }

        card.innerHTML = `
          <img class="hotel-thumb" src="${coverUrl}" loading="lazy" alt="ÙˆØ§Ø¬Ù‡Ø© ${hotel}">
          <div class="hotel-meta">
            <div class="hotel-headline">
              <div>
                <b>${hotel}${note}</b>
                <div class="hotel-ar">${hotelAr}${note}</div>
              </div>
              <div class="hotel-rating" aria-label="ØªØµÙ†ÙŠÙ ${stars} Ù†Ø¬ÙˆÙ…">
                <span class="rating-label">Ø§Ù„ØªØµÙ†ÙŠÙ</span>
                <span class="rating-stars">${starsText}</span>
              </div>
            </div>
            <div class="muted">${city}${area ? ` - ${area}` : ''}</div>
          </div>
          <button class="gallery-btn" type="button">Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</button>
        `;
      }
    }

    function filterHotels(){
      const q = (document.getElementById('q').value || '').toLowerCase().trim();
      const rating = document.getElementById('ratingFilter')?.value || 'all';
      const area = document.getElementById('areaFilter')?.value || 'all';
      const items = document.querySelectorAll('#hotelList .hotel');

      items.forEach(item=>{
        const text = item.innerText.toLowerCase();
        const stars = parseInt(item.dataset.stars || '0', 10);

        const textMatch = text.includes(q);
        const ratingMatch = rating === 'all'
          ? true
          : rating === '5'
            ? stars === 5
            : stars >= 3 && stars <= 4;

        const areaMatch = area === 'all' ? true : (item.dataset.area || '') === area;

        item.style.display = (textMatch && ratingMatch && areaMatch) ? '' : 'none';
      });
    }

    // ========= Lightbox =========
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightboxImage');
    const lightboxTitle = document.getElementById('lightboxTitle');
    const lightboxStrip = document.getElementById('lightboxStrip');
    const lightboxLoading = document.getElementById('lightboxLoading');

    let activeImages = [];
    let activeIndex = 0;
    let activeHotel = '';

    function renderThumbs(){
      lightboxStrip.innerHTML = activeImages.map((src, idx) => (
        `<img src="${src}" class="lightbox-thumb ${idx===activeIndex?'active':''}" data-idx="${idx}" loading="lazy" alt="${activeHotel} ${idx+1}">`
      )).join('');
    }

    function showImage(index){
      if(!activeImages.length) return;
      activeIndex = (index + activeImages.length) % activeImages.length;
      lightboxImage.src = activeImages[activeIndex];
      lightboxTitle.textContent = `${activeHotel} â€” ØµÙˆØ±Ø© ${activeIndex + 1} Ù…Ù† ${activeImages.length}`;
      renderThumbs();
    }

    async function openLightbox(card){
      activeHotel = card.dataset.hotel || '';
      const folder = getFolderFromCard(card);
      const fallbackCover = "background123.jpg";

      lightbox.classList.add('open');
      lightbox.setAttribute('aria-hidden', 'false');

      // loading UI
      lightboxLoading.style.display = '';
      lightboxImage.style.display = 'none';
      lightboxTitle.textContent = `${activeHotel} â€” Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±â€¦`;
      lightboxStrip.innerHTML = '';

      try{
        const m = await loadManifest(folder);

        const coverName = (m.cover || "cover.jpg").trim();
        const coverUrl = buildLocalUrl(folder, coverName);

        const imgs = Array.isArray(m.images) ? m.images : [];
        const galleryUrls = imgs.map(name => buildLocalUrl(folder, String(name).trim())).filter(Boolean);

        // cover + gallery (Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±)
        const merged = [coverUrl, ...galleryUrls.filter(u => u !== coverUrl)];
        activeImages = merged.length ? merged : [fallbackCover];
      }catch(e){
        // Ø¥Ø°Ø§ ØµØ§Ø± Ø´ÙŠ ØºÙ„Ø· Ø¨Ø§Ù„Ù€ manifest
        activeImages = [fallbackCover];
      }

      activeIndex = 0;

      // show
      lightboxLoading.style.display = 'none';
      lightboxImage.style.display = '';
      showImage(0);
    }

    function closeLightbox(){
      lightbox.classList.remove('open');
      lightbox.setAttribute('aria-hidden', 'true');
      lightboxImage.src = '';
      activeImages = [];
      activeIndex = 0;
      activeHotel = '';
      lightboxStrip.innerHTML = '';
    }

    // ========= init =========
    (async function init(){
      await renderHotels();
      initAreaFilter();
      initMapInteractions();
      filterHotels();
    })();

    // open gallery
    document.getElementById('hotelList').addEventListener('click', (e) => {
      const card = e.target.closest('.hotel');
      if(!card) return;

      const isImageClick = !!e.target.closest('.hotel-thumb');
      const isButtonClick = !!e.target.closest('.gallery-btn');
      if(!isImageClick && !isButtonClick) return;

      openLightbox(card);
    });

    // thumbs
    lightboxStrip.addEventListener('click', (e) => {
      const thumb = e.target.closest('.lightbox-thumb');
      if(!thumb) return;
      showImage(parseInt(thumb.dataset.idx, 10));
    });

    document.getElementById('lightboxPrev').addEventListener('click', () => showImage(activeIndex - 1));
    document.getElementById('lightboxNext').addEventListener('click', () => showImage(activeIndex + 1));
    document.getElementById('lightboxClose').addEventListener('click', closeLightbox);

    lightbox.addEventListener('click', (e) => { if(e.target === lightbox) closeLightbox(); });

    document.addEventListener('keydown', (e) => {
      if(!lightbox.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowLeft') showImage(activeIndex + 1);
      if(e.key === 'ArrowRight') showImage(activeIndex - 1);
    });
  </script>

</body>
</html>
